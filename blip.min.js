!function(){function a(){function a(a){var b=(Math.random().toString(16)+"000000000").substr(2,8);return a?"-"+b.substr(0,4)+"-"+b.substr(4,4):b}return a()+a(!0)+a(!0)+a()}function b(a){this.nodes=a||[]}function c(){return this.inputs=new b,this.outputs=new b,this}var d={},e=new AudioContext;b.prototype={count:function(){return this.nodes.length},each:function(a){for(var b=0;b<this.nodes.length;b++)a.call(this,this.nodes[b],b,this.nodes)},contains:function(a){for(var b=0;b<this.nodes.length;b++)if(this.nodes[b]===a)return!0;return!1},add:function(a){-1===this.nodes.indexOf(a)&&this.nodes.push(a)},remove:function(a){var b=this.nodes.indexOf(a);-1!==b&&this.nodes.splice(b,1)},removeAll:function(){this.nodes=[]}};var f={gain:e.createGain,delay:e.createDelay,panner:e.createPanner,convolver:e.createConvolver,analyser:e.createAnalyser,channelSplitter:e.createChannelSplitter,channelMerger:e.createChannelMerger,dynamicsCompressor:e.createDynamicsCompressor,biquadFilter:e.createBiquadFilter,waveShaper:e.createWaveShaper,oscillator:e.createOscillator,periodicWave:e.createPeriodicWave,bufferSource:e.createBufferSource,audioBufferSource:e.createBufferSource};c.prototype={connect:function(a){return this.node().numberOfOutputs>0&&a.node().numberOfInputs>0&&(this.node().connect(a.node()),this.outputs.add(a),a.inputs.add(this)),this},disconnect:function(a){this.node().disconnect();var b=this;return a?(this.outputs.remove(a),a.inputs.remove(this),this.outputs.each(function(a){this.connect(a)})):(this.outputs.each(function(a){a.inputs.remove(b)}),this.outputs.removeAll()),this},prop:function(a,b){if(arguments.length<2){if("object"==typeof a){for(var c in a)this.node()[c]=a[c];return this}return this.node()[a]}return this.node()[a]=b,this},param:function(a,b){return arguments.length<2?this.node()[a]:("function"!=typeof b?this.node()[a].value=b:b.call(this.node()[a]),this)},start:function(a){this.node().start.call(this.node(),a)},stop:function(a){this.node().stop.call(this.node(),a)},node:function(){return this.node()},toString:function(){return"[object BlipNode]"},valueOf:function(){return this.id()}},d.node=function(b){function d(a){return f[a].apply(e,g)}var g=Array.prototype.slice.call(arguments,1),h=d(b),i=a(),j=new c;return j.node=function(){return h},j.id=function(){return i},j};var g=function(b){var d=new c,e=a();return d.node=function(){return b},d.id=function(){return e},d};d.destination=g(e.destination),d.listener=g(e.listener),d.chain=function(a){function b(){for(var b=0;b<a.length-1;b++)a[b].connect(a[b+1])}a=a||[],b();var c={};return c.node=function(d){return a.push(d),b(),c},c.start=function(){var b=a.slice(0,1);return b.length?b[0]:null},c.end=function(){var b=a.slice(-1);return b.length?b[0]:null},c.from=function(a){return a.connect(c.start()),c},c.to=function(a){return c.end().connect(a),c},c.wire=function(){return b(),c},c},d.loop=function(){function a(){}function b(){var a=60/f;l+=a,++k>=j.length&&(k=0,n+=1)}function c(b,c){m.call(a,c,j[b],b)}function d(){for(;l<e.currentTime+i;)if(c(k,l),b(),o&&n>=o)return void a.reset();g=window.setTimeout(d,h)}var f,g,h=25,i=.1,j=[],k=0,l=0,m=function(){},n=0,o=0;return a.tempo=function(b){return arguments.length?(f=b,a):f},a.data=function(b){return arguments.length?(j=b,a):j},a.lookahead=function(b){return arguments.length?(h=b,a):h},a.scheduleAheadTime=function(b){return arguments.length?(i=b,a):i},a.limit=function(b){return arguments.length?(o=b,a):o},a.tick=function(b){return arguments.length?(m=b,a):m},a.start=function(b){return l=b||e.currentTime,d(),a},a.stop=function(){return window.clearTimeout(g),a},a.reset=function(){return k=0,n=0,a},a};var h={};d.sampleLoader=function(){function a(){function a(){if(i<g.length){var a=g[i];i++,f(a,b[a])}else d()}function f(b,d){function f(a){var b=a.target,c=b.response;e.decodeAudioData(c,g)}function g(d){h[b]=d,c(b),a()}var i=new XMLHttpRequest;i.open("GET",d,!0),i.responseType="arraybuffer",i.addEventListener("load",f,!1),i.send()}var g=Object.keys(b),i=0;a()}var b={},c=function(){},d=function(){};return a.samples=function(c){return arguments.length?(b=c,a):b},a.each=function(b){return arguments.length?(c=b,a):c},a.done=function(b){return arguments.length?(d=b,a):d},a.load=function(){return a()},a},d.clip=function(){function a(){}var b,f=1,i=1,j=null,k=d.node("gain").connect(d.destination);return a.sample=function(c){return arguments.length?(b=h[c],a):b},a.defaultRate=function(b){return arguments.length?(defaultRate=b,a):defaultRate},a.rate=function(b){return arguments.length?(f=b,a):f},a.gain=function(b){return arguments.length?(i=b,a):i},a.chain=function(b){return arguments.length?(j=b,k.disconnect(d.destination),j.from(k).to(d.destination),a):j},a.play=function(a,d){var f=e.createBufferSource();f.buffer=b,d&&("undefined"!=typeof d.gain&&("function"==typeof d.gain?k.param("gain",d.gain):k.param("gain",function(){this.setValueAtTime(d.gain,a)})),"undefined"!=typeof d.rate&&("function"==typeof d.rate?c.prototype.param.call(g(f),"playbackRate",d.rate):f.playbackRate.setValueAtTime(d.rate,a))),f.connect(k.node()),f.start(a)},a},d.getContext=function(){return e},d.getLoadedSamples=function(){return h},d.sample=function(a){return h[a]};window.blip=d}();